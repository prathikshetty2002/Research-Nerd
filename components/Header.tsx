import Link from "next/link";
import { useState } from "react";
import { AnimatePresence, m } from "framer-motion";
import { auth } from "../firebase";
import { useAuthState } from "react-firebase-hooks/auth";
const Header: React.FC = () => {
    const [isNavActive, setIsNavActive] = useState<boolean>(false);
    const [user, loading, error] = useAuthState(auth);
    return (
        <div>
            <div>
                <div className="flex md:hidden bg-tertiary rounded-b-xl justify-around py-8">
                    <button onClick={() => setIsNavActive(true)}>
                        <svg
                            width="35"
                            height="34"
                            viewBox="0 0 25 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M21.0015 5.25H3.00146C2.59146 5.25 2.25146 4.91 2.25146 4.5C2.25146 4.09 2.59146 3.75 3.00146 3.75H21.0015C21.4115 3.75 21.7515 4.09 21.7515 4.5C21.7515 4.91 21.4115 5.25 21.0015 5.25Z"
                                fill="#292D32"
                            />
                            <path
                                d="M12.4715 10.25H3.00146C2.59146 10.25 2.25146 9.91 2.25146 9.5C2.25146 9.09 2.59146 8.75 3.00146 8.75H12.4715C12.8815 8.75 13.2215 9.09 13.2215 9.5C13.2215 9.91 12.8915 10.25 12.4715 10.25Z"
                                fill="#292D32"
                            />
                            <path
                                d="M21.0015 15.25H3.00146C2.59146 15.25 2.25146 14.91 2.25146 14.5C2.25146 14.09 2.59146 13.75 3.00146 13.75H21.0015C21.4115 13.75 21.7515 14.09 21.7515 14.5C21.7515 14.91 21.4115 15.25 21.0015 15.25Z"
                                fill="#292D32"
                            />
                            <path
                                d="M12.4715 20.25H3.00146C2.59146 20.25 2.25146 19.91 2.25146 19.5C2.25146 19.09 2.59146 18.75 3.00146 18.75H12.4715C12.8815 18.75 13.2215 19.09 13.2215 19.5C13.2215 19.91 12.8915 20.25 12.4715 20.25Z"
                                fill="#292D32"
                            />
                        </svg>
                    </button>

                    <Link href="/">
                        <a>
                            <img
                                className="w-20 mx-auto"
                                src="/RPR.svg"
                                alt="logo"
                            />
                        </a>
                    </Link>
                </div>
                <AnimatePresence exitBeforeEnter>
                    {isNavActive && (
                        <m.div className=" fixed z-20 top-0">
                            <m.div
                                initial={{
                                    opacity: 0,
                                }}
                                animate={{
                                    opacity: 1,
                                }}
                                exit={{
                                    opacity: 0,
                                }}
                                onClick={() => setIsNavActive(false)}
                                className="w-[100vw] h-[100vh] bg-primary bg-opacity-50"
                            ></m.div>
                            <m.header
                                initial={{
                                    x: -100,
                                }}
                                animate={{
                                    x: 0,
                                }}
                                exit={{
                                    x: -200,
                                }}
                                className="flex flex-col w-24 bg-tertiary  h-[90vh] rounded-2xl justify-around items-center ml-8 translate-y-[5%]
                fixed top-0 "
                            >
                                <div className="">
                                    <nav className="mt-10 space-y-12">
                                        <Link href="/">
                                            <a>
                                                <img
                                                    className="w-20 mx-auto"
                                                    src="/RPR.svg"
                                                    alt="logo"
                                                />
                                            </a>
                                        </Link>
                                        <Link href="/">
                                            <a className="flex flex-col items-center">
                                                <svg
                                                    className="w-2/5"
                                                    viewBox="0 0 57 56"
                                                    fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                >
                                                    <path
                                                        d="M41.5663 52.6402H15.433C11.1863 52.6402 7.31297 49.3735 6.61297 45.1735L3.50964 26.6002C3.01964 23.7069 4.41965 19.9969 6.72965 18.1536L22.8997 5.20347C26.0263 2.68347 30.9496 2.70682 34.0996 5.22682L50.2697 18.1536C52.5563 19.9969 53.9563 23.7069 53.4897 26.6002L50.3863 45.1735C49.6863 49.3035 45.743 52.6402 41.5663 52.6402ZM28.4763 6.86018C27.2397 6.86018 26.003 7.23345 25.093 7.95678L8.92299 20.9069C7.59299 21.9802 6.683 24.3601 6.963 26.0401L10.0663 44.6135C10.4863 47.0635 12.9363 49.1402 15.433 49.1402H41.5663C44.063 49.1402 46.513 47.0635 46.933 44.5901L50.0363 26.0169C50.3163 24.3369 49.383 21.9335 48.0763 20.8835L31.9063 7.95678C30.973 7.23345 29.7363 6.86018 28.4763 6.86018Z"
                                                        fill="black"
                                                    />
                                                    <path
                                                        d="M28.5 37.9167C24.3234 37.9167 20.9167 34.51 20.9167 30.3333C20.9167 26.1567 24.3234 22.75 28.5 22.75C32.6767 22.75 36.0834 26.1567 36.0834 30.3333C36.0834 34.51 32.6767 37.9167 28.5 37.9167ZM28.5 26.25C26.26 26.25 24.4167 28.0933 24.4167 30.3333C24.4167 32.5733 26.26 34.4167 28.5 34.4167C30.74 34.4167 32.5834 32.5733 32.5834 30.3333C32.5834 28.0933 30.74 26.25 28.5 26.25Z"
                                                        fill="black"
                                                    />
                                                </svg>
                                                Home
                                            </a>
                                        </Link>
                                        {user ? (
                                            <Link href="/logout">
                                                <a className="flex flex-col items-center">
                                                    <svg
                                                        className="w-2/5"
                                                        viewBox="0 0 63 63"
                                                        fill="none"
                                                        xmlns="http://www.w3.org/2000/svg"
                                                    >
                                                        <path
                                                            d="M34.7899 50.1076H34.4974C24.5074 50.1076 19.6924 46.1701 18.8599 37.3501C18.7699 36.4276 19.4449 35.5951 20.3899 35.5051C21.2899 35.4151 22.1449 36.1126 22.2349 37.0351C22.8874 44.1001 26.2174 46.7326 34.5199 46.7326H34.8124C43.9699 46.7326 47.2099 43.4926 47.2099 34.3351V19.6651C47.2099 10.5076 43.9699 7.26758 34.8124 7.26758H34.5199C26.1724 7.26758 22.8424 9.94508 22.2349 17.1451C22.1224 18.0676 21.3349 18.7651 20.3899 18.6751C19.4449 18.6076 18.7699 17.7751 18.8374 16.8526C19.6024 7.89758 24.4399 3.89258 34.4974 3.89258H34.7899C45.8374 3.89258 50.5624 8.61758 50.5624 19.6651V34.3351C50.5624 45.3826 45.8374 50.1076 34.7899 50.1076Z"
                                                            fill="#292D32"
                                                        />
                                                        <path
                                                            d="M34.25 28.6875H8.64502C7.72252 28.6875 6.95752 27.9225 6.95752 27C6.95752 26.0775 7.72252 25.3125 8.64502 25.3125H34.25C35.1725 25.3125 35.9375 26.0775 35.9375 27C35.9375 27.9225 35.1725 28.6875 34.25 28.6875Z"
                                                            fill="#292D32"
                                                        />
                                                        <path
                                                            d="M13.6625 36.2249C13.235 36.2249 12.8075 36.0674 12.47 35.7299L4.93249 28.1924C4.27999 27.5399 4.27999 26.4599 4.93249 25.8074L12.47 18.2699C13.1225 17.6174 14.2025 17.6174 14.855 18.2699C15.5075 18.9224 15.5075 20.0024 14.855 20.6549L8.50999 26.9999L14.855 33.3449C15.5075 33.9974 15.5075 35.0774 14.855 35.7299C14.54 36.0674 14.09 36.2249 13.6625 36.2249Z"
                                                            fill="#292D32"
                                                        />
                                                    </svg>
                                                    Logout
                                                </a>
                                            </Link>
                                        ) : (
                                            <Link href="/login">
                                                <a className="flex flex-col items-center">
                                                    <svg
                                                        className="w-2/5"
                                                        viewBox="0 0 63 63"
                                                        fill="none"
                                                        xmlns="http://www.w3.org/2000/svg"
                                                    >
                                                        <path
                                                            d="M40.005 58.4587H39.6637C28.0087 58.4587 22.3912 53.865 21.42 43.575C21.315 42.4987 22.1025 41.5275 23.205 41.4225C24.2812 41.3175 25.2525 42.1312 25.3575 43.2075C26.1187 51.45 30.0037 54.5212 39.69 54.5212H40.0312C50.715 54.5212 54.495 50.7412 54.495 40.0575V22.9425C54.495 12.2587 50.715 8.47874 40.0312 8.47874H39.69C29.9512 8.47874 26.0662 11.6025 25.3575 20.0025C25.2262 21.0787 24.3337 21.8925 23.205 21.7875C22.1025 21.7087 21.315 20.7375 21.3937 19.6612C22.2862 9.21374 27.93 4.54124 39.6637 4.54124H40.005C52.8937 4.54124 58.4062 10.0537 58.4062 22.9425V40.0575C58.4062 52.9462 52.8937 58.4587 40.005 58.4587Z"
                                                            fill="black"
                                                        />
                                                        <path
                                                            d="M39.06 33.4688H5.25C4.17375 33.4688 3.28125 32.5762 3.28125 31.5C3.28125 30.4238 4.17375 29.5312 5.25 29.5312H39.06C40.1363 29.5312 41.0288 30.4238 41.0288 31.5C41.0288 32.5762 40.1625 33.4688 39.06 33.4688Z"
                                                            fill="black"
                                                        />
                                                        <path
                                                            d="M33.2063 42.2625C32.7075 42.2625 32.2088 42.0788 31.815 41.685C31.0538 40.9238 31.0538 39.6638 31.815 38.9025L39.2175 31.5L31.815 24.0975C31.0538 23.3363 31.0538 22.0763 31.815 21.315C32.5763 20.5538 33.8363 20.5538 34.5975 21.315L43.3913 30.1088C44.1525 30.87 44.1525 32.13 43.3913 32.8913L34.5975 41.685C34.2038 42.0788 33.705 42.2625 33.2063 42.2625Z"
                                                            fill="black"
                                                        />
                                                    </svg>
                                                    Login
                                                </a>
                                            </Link>
                                        )}
                                    </nav>
                                </div>

                                <span className="font-bold">
                                    <Link passHref href="/profile">
                                        <a>
                                            <img
                                                className="w-12 mb-2"
                                                src="profile.svg"
                                                alt="Profile Pic"
                                            />
                                            <p>
                                                {user
                                                    ? user.displayName
                                                    : "Guest"}
                                            </p>
                                        </a>
                                    </Link>
                                </span>
                            </m.header>
                        </m.div>
                    )}
                </AnimatePresence>
            </div>
            <div className="hidden md:block h-[100vh] fixed md:relative  ">
                <header className="flex flex-col w-24 bg-tertiary  h-[90vh] rounded-2xl justify-around items-center sticky ml-8 translate-y-[5%] ">
                    <div className="">
                        <Link href="/">
                            <a>
                                <img
                                    className="w-20 mx-auto"
                                    src="/RPR.svg"
                                    alt="logo"
                                />
                            </a>
                        </Link>
                        <nav className="mt-10 space-y-12">
                            <Link href="/">
                                <a className="flex flex-col items-center">
                                    <svg
                                        className="w-2/5"
                                        viewBox="0 0 57 56"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            d="M41.5663 52.6402H15.433C11.1863 52.6402 7.31297 49.3735 6.61297 45.1735L3.50964 26.6002C3.01964 23.7069 4.41965 19.9969 6.72965 18.1536L22.8997 5.20347C26.0263 2.68347 30.9496 2.70682 34.0996 5.22682L50.2697 18.1536C52.5563 19.9969 53.9563 23.7069 53.4897 26.6002L50.3863 45.1735C49.6863 49.3035 45.743 52.6402 41.5663 52.6402ZM28.4763 6.86018C27.2397 6.86018 26.003 7.23345 25.093 7.95678L8.92299 20.9069C7.59299 21.9802 6.683 24.3601 6.963 26.0401L10.0663 44.6135C10.4863 47.0635 12.9363 49.1402 15.433 49.1402H41.5663C44.063 49.1402 46.513 47.0635 46.933 44.5901L50.0363 26.0169C50.3163 24.3369 49.383 21.9335 48.0763 20.8835L31.9063 7.95678C30.973 7.23345 29.7363 6.86018 28.4763 6.86018Z"
                                            fill="black"
                                        />
                                        <path
                                            d="M28.5 37.9167C24.3234 37.9167 20.9167 34.51 20.9167 30.3333C20.9167 26.1567 24.3234 22.75 28.5 22.75C32.6767 22.75 36.0834 26.1567 36.0834 30.3333C36.0834 34.51 32.6767 37.9167 28.5 37.9167ZM28.5 26.25C26.26 26.25 24.4167 28.0933 24.4167 30.3333C24.4167 32.5733 26.26 34.4167 28.5 34.4167C30.74 34.4167 32.5834 32.5733 32.5834 30.3333C32.5834 28.0933 30.74 26.25 28.5 26.25Z"
                                            fill="black"
                                        />
                                    </svg>
                                    Home
                                </a>
                            </Link>
                            {user ? (
                                <Link href="/logout">
                                    <a className="flex flex-col items-center">
                                        <svg
                                            className="w-2/5"
                                            viewBox="0 0 63 63"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                        >
                                            <path
                                                d="M34.7899 50.1076H34.4974C24.5074 50.1076 19.6924 46.1701 18.8599 37.3501C18.7699 36.4276 19.4449 35.5951 20.3899 35.5051C21.2899 35.4151 22.1449 36.1126 22.2349 37.0351C22.8874 44.1001 26.2174 46.7326 34.5199 46.7326H34.8124C43.9699 46.7326 47.2099 43.4926 47.2099 34.3351V19.6651C47.2099 10.5076 43.9699 7.26758 34.8124 7.26758H34.5199C26.1724 7.26758 22.8424 9.94508 22.2349 17.1451C22.1224 18.0676 21.3349 18.7651 20.3899 18.6751C19.4449 18.6076 18.7699 17.7751 18.8374 16.8526C19.6024 7.89758 24.4399 3.89258 34.4974 3.89258H34.7899C45.8374 3.89258 50.5624 8.61758 50.5624 19.6651V34.3351C50.5624 45.3826 45.8374 50.1076 34.7899 50.1076Z"
                                                fill="#292D32"
                                            />
                                            <path
                                                d="M34.25 28.6875H8.64502C7.72252 28.6875 6.95752 27.9225 6.95752 27C6.95752 26.0775 7.72252 25.3125 8.64502 25.3125H34.25C35.1725 25.3125 35.9375 26.0775 35.9375 27C35.9375 27.9225 35.1725 28.6875 34.25 28.6875Z"
                                                fill="#292D32"
                                            />
                                            <path
                                                d="M13.6625 36.2249C13.235 36.2249 12.8075 36.0674 12.47 35.7299L4.93249 28.1924C4.27999 27.5399 4.27999 26.4599 4.93249 25.8074L12.47 18.2699C13.1225 17.6174 14.2025 17.6174 14.855 18.2699C15.5075 18.9224 15.5075 20.0024 14.855 20.6549L8.50999 26.9999L14.855 33.3449C15.5075 33.9974 15.5075 35.0774 14.855 35.7299C14.54 36.0674 14.09 36.2249 13.6625 36.2249Z"
                                                fill="#292D32"
                                            />
                                        </svg>
                                        Logout
                                    </a>
                                </Link>
                            ) : (
                                <Link href="/login">
                                    <a className="flex flex-col items-center">
                                        <svg
                                            className="w-2/5"
                                            viewBox="0 0 63 63"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                        >
                                            <path
                                                d="M40.005 58.4587H39.6637C28.0087 58.4587 22.3912 53.865 21.42 43.575C21.315 42.4987 22.1025 41.5275 23.205 41.4225C24.2812 41.3175 25.2525 42.1312 25.3575 43.2075C26.1187 51.45 30.0037 54.5212 39.69 54.5212H40.0312C50.715 54.5212 54.495 50.7412 54.495 40.0575V22.9425C54.495 12.2587 50.715 8.47874 40.0312 8.47874H39.69C29.9512 8.47874 26.0662 11.6025 25.3575 20.0025C25.2262 21.0787 24.3337 21.8925 23.205 21.7875C22.1025 21.7087 21.315 20.7375 21.3937 19.6612C22.2862 9.21374 27.93 4.54124 39.6637 4.54124H40.005C52.8937 4.54124 58.4062 10.0537 58.4062 22.9425V40.0575C58.4062 52.9462 52.8937 58.4587 40.005 58.4587Z"
                                                fill="black"
                                            />
                                            <path
                                                d="M39.06 33.4688H5.25C4.17375 33.4688 3.28125 32.5762 3.28125 31.5C3.28125 30.4238 4.17375 29.5312 5.25 29.5312H39.06C40.1363 29.5312 41.0288 30.4238 41.0288 31.5C41.0288 32.5762 40.1625 33.4688 39.06 33.4688Z"
                                                fill="black"
                                            />
                                            <path
                                                d="M33.2063 42.2625C32.7075 42.2625 32.2088 42.0788 31.815 41.685C31.0538 40.9238 31.0538 39.6638 31.815 38.9025L39.2175 31.5L31.815 24.0975C31.0538 23.3363 31.0538 22.0763 31.815 21.315C32.5763 20.5538 33.8363 20.5538 34.5975 21.315L43.3913 30.1088C44.1525 30.87 44.1525 32.13 43.3913 32.8913L34.5975 41.685C34.2038 42.0788 33.705 42.2625 33.2063 42.2625Z"
                                                fill="black"
                                            />
                                        </svg>
                                        Login
                                    </a>
                                </Link>
                            )}
                        </nav>
                    </div>

                    <span className="font-bold">
                        <Link passHref href="/profile">
                            <a>
                                <img
                                    className="w-12 mb-2"
                                    src="/profile.svg"
                                    alt="Profile Pic"
                                />
                                <p>{user ? user.displayName : "Guest"}</p>
                            </a>
                        </Link>
                    </span>
                </header>
            </div>
        </div>
    );
};

export default Header;
